有如下SQL：
```sql
SELECT *
FROM orders
where o_order_date > '2022-01-01'
AND (o_order_priority = 1 or o_ship_priority = 1)
ORDER BY o_order_date DESC
LIMIT 20, 10;
```
其中，表有如下特点：
1. o_order_priority为字符串类型。
2. o_ship_priority为数字类型。

# 构建索引
# 日期上
第一步，可以在o_order_date上构建索引：
```sql
CREATE INDEX idx ON orders (o_order_date DESC)
```
这是因为一般而言，通过时间过滤能够移除大量的数据。这也是最简单有效的。

# 剩余条件
除了上述的外，由于`o_order_priority`和`o_ship_priority`是用`OR`关系连接，但我们可以适当修改SQL：
```sql
(
	SELECT *
	FROM orders
	where o_order_date > '2022-01-01'
	  AND o_order_priority = 1
) 
UNION
(
	SELECT *
	FROM orders
	where o_order_date > '2022-01-01'
	  AND o_ship_priority = 1
)
```
这样，我们将条件均使用AND进行连接，所以我们能够构建联合索引：
```sql
CREATE INDEX idx1 ON orders (o_order_priority, o_order_date DESC)
CREATE INDEX idx2 ON orders (o_ship_priority, o_order_date DESC)
```
不过其实这里还有一个问题：o_order_priority为字符串类型。