一般而言，我们应当尽可能使用线程安全的类来处理多线程情况，但在并行环境下，比较容易犯错的一个情况是，两个线程安全的变量的操作没有放在一个原子操作内，导致的线程不安全：
```java
AtomicReference<BigInteger> lastNumber;
AtomicReference<BigInteger[]> lastFactors

service(inti){
	BigInteger[] factors = factor(req);
	lastNumber.set()
}
```